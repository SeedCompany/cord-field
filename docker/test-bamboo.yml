version: '2'
services:

  local-test-service: # prefixed with "local-" to skip trying to pull image
    image: cord-field:tests
    volumes:
      - ../testResults:/opt/build/testResults
    links:
      - ilb-profile-service

  cord-api-plo:
    image: 103805181946.dkr.ecr.us-west-2.amazonaws.com/client/cord-api-plo:latest
    ports:
        - "8001"
    links:
        - mongo-db
    environment:
      MONGO_DB_ADDRESS: mongo-db
      MONGO_DB_PORT: 27017
      NODE_ENV: dev
      SERVICE_8001_NAME: client-tsco-cord-field-uat
    mem_limit: 256000000

  ilb-profile-service:
    image: 103805181946.dkr.ecr.us-west-2.amazonaws.com/client/tsco-ilb-profile:latest
    links:
      - mongo-db
    environment:
      MONGO_DB_ADDRESS: mongo-db
      MONGO_DB_PORT: 27017
      NODE_ENV: docker
      ECHO_ENABLED: "true"
      BOOTSTRAP: "qa"
      TRACE_REQ: "true"

  mongo-db:
    image: mongo
