query ProjectOverview($input: ID!, $changeset: ID) {
  project(id: $input, changeset: $changeset) {
    ...ProjectOverview
  }
}

fragment ProjectOverview on Project {
  __typename
  ...Id
  departmentId {
    canRead
    canEdit
    value
  }
  name {
    canRead
    canEdit
    value
  }
  primaryLocation {
    canRead
    canEdit
    value {
      ...DisplayLocation
    }
  }
  marketingLocationOverride {
    canRead
    canEdit
    value {
      ...DisplayLocation
    }
  }
  fieldRegion {
    canRead
    canEdit
    value {
      ...DisplayFieldRegion
    }
  }
  mouRange {
    ...securedDateRange
  }
  projectStatus: status
  estimatedSubmission {
    canRead
    canEdit
    value
  }
  step {
    canRead
    canEdit
    value
    transitions {
      to
      label
      type
      disabled
      disabledReason
    }
    canBypassTransitions
  }
  presetInventory {
    canRead
    canEdit
    value
  }
  sensitivity
  modifiedAt
  ...TogglePin
  budget {
    canRead
    value {
      ...BudgetOverview
    }
  }
  team {
    ...ProjectMemberList
  }
  type
  partnerships {
    ...PartnershipSummary
  }
  currentFinancialReportDue {
    ...SecuredPeriodicReport
  }
  nextFinancialReportDue {
    ...SecuredPeriodicReport
  }
  currentNarrativeReportDue {
    ...SecuredPeriodicReport
  }
  nextNarrativeReportDue {
    ...SecuredPeriodicReport
  }
  changeRequests {
    ...ProjectChangeRequestSummary
  }

  # We're including this in order to update the engagament status
  # when the project step changes.
  engagements {
    items {
      ...Id
      status {
        value
      }
    }
  }
}

query ProjectEngagementListOverview(
  $project: ID!
  $input: EngagementListInput
  $changeset: ID
) {
  project(id: $project, changeset: $changeset) {
    ...Id
    engagements(input: $input) {
      ...ProjectEngagementList
    }
  }
}

fragment ProjectEngagementList on SecuredEngagementList {
  canRead
  canCreate
  items {
    ... on LanguageEngagement {
      __typename
      ...LanguageEngagementListItem
    }
    ... on InternshipEngagement {
      __typename
      ...InternshipEngagementListItem
    }
  }
  ...Pagination
}
