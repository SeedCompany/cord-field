query ProgressReportDetail(
  $changeset: ID
  $engagementId: ID!
  $progressReportId: ID!
  $progressFormat: ProgressFormat!
) {
  engagement(id: $engagementId, changeset: $changeset) {
    ...EngagementBreadcrumb
    project {
      ...ProjectBreadcrumb
    }
  }
  periodicReport(id: $progressReportId) {
    ...ProgressReport
  }
}

fragment ProgressReport on ProgressReport {
  ...PeriodicReport
  cumulativeSummary {
    ...ProgressSummary
  }
  progress {
    ...ProgressOfProductForReport
  }
}

fragment ProgressSummary on ProgressSummary {
  actual(format: $progressFormat)
  planned(format: $progressFormat)
  variance(format: $progressFormat)
}

fragment ProgressOfProductForReport on ProductProgress {
  product {
    ...Id
    label
    category
    steps {
      value
    }
    availableSteps
    progressStepMeasurement {
      value
    }
    progressTarget {
      value
    }
    ... on DirectScriptureProduct {
      scriptureReferences {
        value {
          ...Scripture
        }
      }
      unspecifiedScripture {
        value {
          book
        }
      }
    }
  }
  report {
    ...Id
  }
  steps {
    step
    completed(format: Percent) {
      canRead
      value
      canEdit
    }
    verses: completed(format: Verses) {
      canRead
      value
      canEdit
    }
    verseEquivalents: completed(format: VerseEquivalents) {
      canRead
      value
      canEdit
    }
  }
}
