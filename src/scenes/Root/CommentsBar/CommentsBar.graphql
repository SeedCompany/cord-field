query CommentThreadsList($resourceId: ID!, $input: CommentThreadListInput) {
  commentThreads(resource: $resourceId) {
    parent {
      id
      commentThreads(input: $input) {
        total
        hasMore
        items {
          ...CommentThreadProps
        }
      }
    }
  }
}

query CommentThread($id: ID!) {
  commentThread(id: $id) {
    ...CommentThreadProps
  }
}

mutation CreateOrReplyComment(
  $commentBody: RichText!
  $resourceId: ID!
  $threadId: ID
) {
  createComment(
    input: { body: $commentBody, resourceId: $resourceId, threadId: $threadId }
  ) {
    commentThread {
      parent {
        id
        __typename
        commentThreads {
          hasMore
          items {
            ...CommentThreadProps
          }
        }
      }
    }
  }
}

mutation UpdateComment($commentBody: RichText!, $commentId: ID!) {
  updateComment(input: { body: $commentBody, id: $commentId }) {
    comment {
      ...CommentProps
    }
  }
}

mutation DeleteComment($id: ID!) {
  deleteComment(id: $id) {
    __typename
  }
}

fragment CommentProps on Comment {
  id
  body {
    value
  }
  creator {
    fullName
    avatarLetters
    id
  }
  createdAt
  modifiedAt
  canDelete
  __typename
}

fragment CommentThreadProps on CommentThread {
  id
  firstComment {
    ...CommentProps
  }
  comments {
    total
    items {
      ...CommentProps
    }
  }
}
