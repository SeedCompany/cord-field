<ng-container *ngFor="let userRole of userRolesCtl.controls; trackBy: trackUserRoleControl">
  <mat-form-field color="accent">
    <mat-select placeholder="Role"
                [formControl]="userRole.get('role')">
      <mat-option *ngIf="userRole.get('role')?.value"
                  class="remove">Remove Role</mat-option>
      <mat-option *ngIf="userRole.get('role')?.value"
                  [value]="userRole.get('role')?.value">
        {{ Role.forUI(userRole.get('role')?.value) }}
      </mat-option>
      <mat-option *ngFor="let availableRole of availableRoles; trackBy: Role.trackValueBy"
                  [value]="availableRole">
        {{ Role.forUI(availableRole) }}
      </mat-option>
    </mat-select>
  </mat-form-field>
  <app-autocomplete-location *ngIf="Role.needsLocations.includes(userRole.get('role')?.value)"
                             [chips]="true"
                             [dedupe]="true"
                             [required]="true"
                             requiredMessage="Please select one or more locations"
                             [formControl]="userRole.get('locations')"
                             (optionSelected)="onLocationAdded(userRole, $event)"
                             (removed)="onLocationRemoved(userRole, $event)">
  </app-autocomplete-location>
</ng-container>

<button type="button"
        mat-button
        color="accent"
        [disabled]="adding || disabled"
        (click)="add()">{{ loadingRoles ? 'LOADING ROLES...' : 'ADD ROLE' }}</button>
