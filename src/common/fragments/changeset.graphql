# Use with mutation results to fetch & re-calculate the changeset diff from the API
# considering the change being made.
fragment RecalculateChangesetDiff on ChangesetAware {
  id
  changeset {
    id
    difference {
      ...ChangesetDiff
    }
  }
}

fragment ChangesetDiff on ChangesetDiff {
  added {
    ...ChangesetDiffItem
  }
  removed {
    ...ChangesetDiffItem
  }
  changed {
    previous {
      ...ChangesetDiffItem
    }
    updated {
      ...ChangesetDiffItem
    }
  }
}

fragment ChangesetDiffItem on Resource {
  ...Id
  ...BudgetRecordDiffProps
  ...ProjectDiffProps
}

fragment BudgetRecordDiffProps on BudgetRecord {
  amount {
    value
  }
}

fragment ProjectDiffProps on Project {
  name {
    value
  }
  mouRange {
    value {
      start
      end
    }
  }
  step {
    value
  }
  projectStatus: status
}
