schema: schema.graphql
documents:
  - ./src/**/*.graphql
overwrite: true
hooks:
  afterAllFileWrite:
    - eslint --fix --ext .generated.ts
generates:
  ./src/api/fragmentMatcher.generated.ts:
    plugins:
      - add: /* eslint-disable import/no-default-export */
      - fragment-matcher
      - add:
          placement: append
          content: export const possibleTypes = result.possibleTypes;
    config:
      apolloClientVersion: 3
  ./src/api/scalars/scalars.generated.ts:
    plugins:
      - ./src/api/scalars/scalars.codegen
    config:
      parserImport: ./scalars.parser
  ./src/api/schema.generated.ts:
    plugins:
      - typescript
    config:
      reactApolloVersion: 3
      scalars:
        Date: string
        DateTime: string
      skipTypename: false
      enumsAsTypes: true
  ./src/:
    preset: near-operation-file
    presetConfig:
      extension: .generated.ts
      baseTypesPath: api/schema.generated.ts
    plugins:
      # import/no-duplicates is here until hooks & common can be merged into one import
      - add: /* eslint-disable import/no-duplicates, @typescript-eslint/no-empty-interface */
      - typescript-operations
      - typescript-react-apollo
    config:
      reactApolloVersion: 3
      scalars:
        Date: string
        DateTime: string
      skipTypename: false
      withHooks: true
      withHOC: false
      withComponent: false
      enumsAsTypes: true
